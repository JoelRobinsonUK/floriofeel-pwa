<html lang="en">

<head>
    <!-- Meta -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Floriofeel</title>

    <!-- Styles -->
    <link type="text/css" href="../css/materialize.min.css" rel="stylesheet">
    <link type="text/css" href="../css/styles.css" rel="stylesheet">

    <!-- Icon Libraries -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css"
        integrity="sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- Font Import -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="../js/materialize.min.js"></script>
    <script type="text/javascript" src="../js/scripts.js"></script>
    <link rel="manifest" href="../manifest.json">
    <!-- iOS Support -->
    <link rel="apple-touch-icon" href="../img/icons/icon-96x96.png">
    <meta name="apple-mobile-web-app-status-bar" content="#403038">
    <meta name="theme-color" content="#403038">
</head>

<body class="">

    <!-- top navigation -->
    <div class="navbar-fixed">
        <nav class="z-depth-0" style="background-color: #8c697b;">
            <div class="nav-wrapper container center">

                </span>
                <a href="./home.html"><img class="responsive-img" src="../img/floriofeel logo.png"
                        style="height: 70%; padding-top: 15px;"></a>
                <span class="right">
                    <a href="#"><i class="material-icons">account_circle</i>
                    </a>

                </span>
                <span class="left">
                    <a onclick="back()"><i class="material-icons">keyboard_backspace</i></a>
            </div>
        </nav>
    </div>

    <div class="main" id="info" style="display: block;">
        <div class="container center">
            <div class="row">
                <div class="col s12 l12">
                    <h5>Signed in as</h5>
                    <div class="userEmail">
                    </div>
                </div>
                <div class="col s12 l12">
                    <hr class="rounded">
                </div>
            </div>
            <br><br>
            <div class="row" id="">

                <div class="col s8 l4 offset-s2 offset-l4">
                    <a href="./history.html" style="border-radius: 100px; width: 100%; background-color: #403038;"
                        class="btn white-text">
                        <div class="container" >
                            <i class="material-icons left"></i><span class="">View My History</span>
                        </div>
                    </a>
                </div>
            </div>
            <div class="row" id="logout-div">

                <div class="col s8 l4 offset-s2 offset-l4">
                    <a id="logout" style="border-radius: 100px; width: 100%;" class="btn red darken-4 white-text">
                        <div class="container" style="padding-left: 30px; padding-right: 30px;">
                            <i class="material-icons left">login</i><span class="right">Sign Out</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <footer class="page-footer">
        <div class="footer-copyright">
            <div class="container version">
                © 2020 Joel Robinson
                <a class="right white-text">Version 1.0.1</a>
            </div>
        </div>
    </footer>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-firestore.js"></script>
    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyANtOHw7cyhZM0JC3545b1_3CkNA8Hzles",
            authDomain: "floriofeel-pwa.firebaseapp.com",
            projectId: "floriofeel-pwa",
            storageBucket: "floriofeel-pwa.appspot.com",
            messagingSenderId: "650188182160",
            appId: "1:650188182160:web:80f34729f36a4c299bfe15",
            measurementId: "G-3D0PVZ5JDN"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        //update firestore settings
        db.settings({ timestampsInSnapshots: true });
    </script>
    <!-- Other scripts -->
    <script src="../js/auth.js"></script>
    <script src="../js/app.js"></script>
    <script src="../js/db.js"></script>
    <script src="../js/ui.js"></script>
    <script>
        document.querySelector('.userEmail').innerHTML = `<h4>${sessionStorage.getItem("UserEmail")}</h4>`;
        document.querySelector('.version').innerHTML = `© 2020 Joel Robinson
                <a class="right white-text">Version ${versionNum}</a>`;
        const logout = document.querySelector('#logout');
        logout.addEventListener('click', (e) => {
            e.preventDefault();
            auth.signOut().then(() => {
                //console.log("user logged out");
                window.location.assign('../index.html');
            });
        });

        const darkModeToggle = document.querySelector('.dark-mode');

        darkModeToggle.addEventListener("click", () => {
            if(localStorage.getItem("DarkMode") !== "on"){
                EnableDarkMode();
            }

        });
    </script>
</body>

</html>